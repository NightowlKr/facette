# Systemd override template for Facette
#
# Base unit file installed by the package:
#   /lib/systemd/system/facette.service
#
# This drop-in override template is copied (on first install) to:
#   /etc/systemd/system/facette.service.d/override.conf
#
# You can inspect the merged configuration (base unit + this override) with:
#   systemctl cat facette.service
#
# To activate any of the options below, uncomment the corresponding lines
# and reload systemd:
#   sudo systemctl daemon-reload
#   sudo systemctl restart facette.service

[Unit]
# Limit how often the service may restart within a time window before
# systemd starts delaying further restarts.
#StartLimitIntervalSec=60
#StartLimitBurst=5

[Service]
# -------- Resource limits (files, processes) --------
# Increase the maximum number of open file descriptors for the Facette process.
# This is useful when handling many TCP connections or RRD/TSDB files.
#LimitNOFILE=262144

# Limit the maximum number of tasks/threads. Prevents accidental fork-bombs
# or runaway goroutines creating too many threads.
#TasksMax=8192

# -------- Memory limits --------
# Hard limit on the total memory usage for the service. When the process
# reaches this value, the OOM killer will terminate it.
#MemoryMax=2G

# Maximum amount of swap memory the service may use. 0 disables swap usage
# for this service (if supported by the kernel/systemd version).
#MemorySwapMax=0

# -------- CPU scheduling & quota --------
# Relative CPU weight when competing with other services (1-10000, default 100).
# Higher values give Facette more CPU share.
#CPUWeight=200

# Hard quota for CPU time as percentage of one CPU. For example:
#  50% = at most half of one CPU
# 200% = at most two full CPUs
#CPUQuota=200%

# Pin the service to a specific set of CPU cores.
#CPUAffinity=0-3

# -------- I/O behavior --------
# Relative I/O weight for IO scheduling (1-10000).
#IOWeight=500

# Classic I/O scheduler hints (only used by some schedulers).
#IOSchedulingClass=2
#IOSchedulingPriority=4

# -------- Restart tuning --------
# Control how quickly systemd restarts the service after a failure.
#Restart=on-failure
#RestartSec=5s
